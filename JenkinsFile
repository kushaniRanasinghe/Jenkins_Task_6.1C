pipeline 
{
    agent any
    
    stages
    {
        stage('Build') 
        {
            steps 
            {
                echo "Building the code using a build automation tool to compile and package your code"
                echo "Tool : Maven or Gradle"
            }
        }
        
        stage('Unit and Integration Tests') 
        {
            steps 
            {
                echo "Unit tests are run to verify the functionality of individual components and integration tests check how these components work together"
                echo "Tool : Unit Test - JUnit or NUnit"
                echo "Tool : Integration Tests - Selenium or Postman"
            }
            post 
            {
                success 
                {
                    mail to: "ranasinghe.kush@gmail.com",
                    body: 'Unit and Integration Testing was successful',
                    subject: 'Unit and Integration Testing Status Email'
                   
                }
               
            }

        }
        
        stage('Code Analysis') 
        {
            steps 
            {
                echo "Analyze the code to ensure it meets industry standards and best practices"
                echo "Tool : SonarQube"
            }
        }
        
        stage('Security Scan') 
        {
            steps
            {
                echo "Perform a security scan on the code to identify any vulnerabilities "
                echo "Tool : OWASP Dependency Check"
            }
            post 
            {
                success 
                {
                    mail to: "ranasinghe.kush@gmail.com",
                    body: 'Security Scan was successful',
                    subject: 'Security Scan Status Email'
                }
                
            }
        }
        
        stage('Deploy to Staging') 
        {
            steps 
            {
                echo "Deploy the application to a staging server"
                echo "Tool : AWS CodeDeploy or Jenkins"
            }
        }
        stage('Integration Tests on Staging') 
        {
            steps 
            {
                echo "Run integration tests on the staging environment to ensure the application functions as expected in a production-like environment"
                echo "Tool : Postman or Selenium"
            }
        }
        stage('Deploy to Production') 
        {
            steps 
            {
                echo "Deploy the application to a production server"
                echo "Tool : AWS CodeDeploy"
            }
        }
    }
}
